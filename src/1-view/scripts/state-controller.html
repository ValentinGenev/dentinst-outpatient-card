<script  type="text/javascript">
  ((w, d) => {
    w.addEventListener('storage', toggleUiIfPatient)

    function toggleUiIfPatient() {
      if (checkIfHasPatient()) {
        d.querySelector('#edit_patient_form')?.classList.remove('d-none')
        d.querySelector('#medical_history_form')?.classList.remove('d-none')
        d.querySelector('#new_patient_form')?.classList.add('d-none')
        return
      }

      d.querySelector('#new_patient_form')?.classList.remove('d-none')
      d.querySelector('#edit_patient_form')?.classList.add('d-none')
      d.querySelector('#medical_history_form')?.classList.add('d-none')
    }
  })(window, document)

  /**
   * Checks if there is a patient's ID in the Session storage
   * @returns {boolean} - True if there is a patient's ID in the Session storage
   */
  function checkIfHasPatient() {
    return Boolean(window.sessionStorage.getItem('patientId'))
  }

  /**
   * Stores patient's ID in the Session storage
   * @param {string} id - The patient's ID.
   */
  function storePatientId(id) {
    window.sessionStorage.setItem('patientId', id)
    window.dispatchEvent(new Event('storage'))
  }
</script>
